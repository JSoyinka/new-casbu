{"version":3,"file":"page-BOd0-wbv.js","sources":["../../src/pages/profile/page.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { signOut } from '../../lib/supabase';\n\nexport default function ProfilePage() {\n  const navigate = useNavigate();\n  const location = useLocation();\n  const { profile, isDemoUser, loading, setDemoUser } = useAuth();\n  const [isCreator, setIsCreator] = useState(false);\n\n  useEffect(() => {\n    if (profile?.is_creator) {\n      setIsCreator(true);\n    }\n    if (location.state?.enableCreatorMode) {\n      setIsCreator(true);\n    }\n  }, [location.state, profile]);\n\n  const handleLogout = async () => {\n    try {\n      if (!isDemoUser) {\n        // For real users, sign out from Supabase\n        await signOut();\n      }\n      // Reset demo state and navigate to login\n      setDemoUser(false);\n      navigate('/login');\n    } catch (error) {\n      console.error('Error signing out:', error);\n      // Even if there's an error, navigate to login\n      setDemoUser(false);\n      navigate('/login');\n    }\n  };\n\n  // Use demo data for demo users, zero out for authenticated users\n  const userStats = {\n    subscriptions: isDemoUser ? 3 : 0,\n    totalSpent: isDemoUser ? 92.97 : 0,\n    messagesThisMonth: isDemoUser ? 12 : 0,\n    joinDate: 'January 2024'\n  };\n\n  const demoUserData = {\n    name: 'John Doe',\n    email: 'john.doe@email.com',\n    initials: 'JD'\n  };\n\n  const currentUser = isDemoUser ? demoUserData : {\n    name: profile?.full_name || 'User',\n    email: profile?.email || '',\n    initials: profile?.full_name?.split(' ').map(n => n[0]).join('') || 'U'\n  };\n\n  const menuItems = [\n    { icon: 'ri-user-settings-line', title: 'Account Settings', subtitle: 'Personal information and preferences', action: () => navigate('/account-settings') },\n    { icon: 'ri-notification-line', title: 'Notifications', subtitle: 'Manage your notification preferences', action: () => navigate('/notifications') },\n    { icon: 'ri-shield-check-line', title: 'Privacy & Security', subtitle: 'Control your privacy settings', action: () => navigate('/privacy-security') },\n    { icon: 'ri-credit-card-line', title: 'Payment Methods', subtitle: 'Manage billing and payments', action: () => navigate('/payment-methods') },\n    { icon: 'ri-settings-3-line', title: 'AI Settings', subtitle: 'Customize your AI assistant', action: () => navigate('/settings') },\n    { icon: 'ri-question-line', title: 'Help & Support', subtitle: 'Get help and contact support', action: () => navigate('/help-support') },\n    { icon: 'ri-information-line', title: 'About', subtitle: 'App version and legal information', action: () => navigate('/about') }\n  ];\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center\">\n        <div className=\"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\n      {/* Header */}\n      <header className=\"fixed top-0 left-0 right-0 w-full bg-white/80 dark:bg-gray-900/80 backdrop-blur-xl shadow-sm z-[100] border-b border-gray-200/50 dark:border-gray-700/50\">\n        <div className=\"px-4 py-3\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-2\">\n              <div className=\"w-6 h-6 bg-gradient-to-r from-blue-500 via-blue-700 to-purple-600 rounded-lg flex items-center justify-center\">\n                <i className=\"ri-cpu-line text-white text-sm\"></i>\n              </div>\n              <h1 className=\"text-lg font-bold text-gray-900 dark:text-white\" style={{ fontFamily: \"'Orbitron', sans-serif\", letterSpacing: '0.05em' }}>\n                DirectLine\n              </h1>\n            </div>\n            <button \n              onClick={() => navigate('/settings')}\n              className=\"w-8 h-8 flex items-center justify-center\"\n            >\n              <i className=\"ri-settings-3-line text-gray-600 dark:text-gray-400 text-lg\"></i>\n            </button>\n          </div>\n        </div>\n      </header>\n\n      {/* Profile Section */}\n      <div className=\"pt-20 px-4 pb-6\">\n        <div className=\"bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700\">\n          <div className=\"flex items-center space-x-4 mb-6\">\n            <div className=\"w-20 h-20 bg-gradient-to-r from-blue-500 via-blue-700 to-purple-600 rounded-full flex items-center justify-center\">\n              <span className=\"text-white text-2xl font-bold\">{currentUser.initials}</span>\n            </div>\n            <div className=\"flex-1\">\n              <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">{currentUser.name}</h2>\n              <p className=\"text-gray-600 dark:text-gray-400\">{currentUser.email}</p>\n              <p className=\"text-sm text-gray-500 dark:text-gray-500\">Member since {userStats.joinDate}</p>\n            </div>\n          </div>\n\n          {/* Creator Toggle */}\n          {(profile?.is_creator || isDemoUser) && (\n            <div className=\"flex items-center justify-between p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg mb-4\">\n              <div>\n                <h3 className=\"font-semibold text-blue-900 dark:text-blue-300\">Creator Mode</h3>\n                <p className=\"text-sm text-blue-600 dark:text-blue-400\">Switch to creator dashboard</p>\n              </div>\n              <button\n                onClick={() => {\n                  setIsCreator(!isCreator);\n                  if (!isCreator) {\n                    navigate('/subscribers');\n                  }\n                }}\n                className={`w-12 h-6 rounded-full transition-colors ${\n                  isCreator ? 'bg-blue-500' : 'bg-gray-300 dark:bg-gray-600'\n                }`}\n              >\n                <div className={`w-5 h-5 bg-white rounded-full transition-transform ${\n                  isCreator ? 'translate-x-6' : 'translate-x-0.5'\n                }`}></div>\n              </button>\n            </div>\n          )}\n\n          {/* Stats Grid */}\n          <div className=\"grid grid-cols-2 gap-4\">\n            <div className=\"text-center\">\n              <p className=\"text-2xl font-bold text-blue-600 dark:text-blue-400\">{userStats.subscriptions}</p>\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">Active Subscriptions</p>\n            </div>\n            <div className=\"text-center\">\n              <p className=\"text-2xl font-bold text-blue-600 dark:text-blue-400\">${userStats.totalSpent.toFixed(2)}</p>\n              <p className=\"text-sm text-gray-600 dark:text-gray-400\">Total Spent</p>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Creator Actions */}\n      {isCreator && (\n        <div className=\"px-4 pb-6\">\n          <div className=\"bg-gradient-to-r from-blue-500 via-blue-700 to-purple-600 rounded-xl p-4 text-white\">\n            <h3 className=\"font-semibold mb-3\">Creator Dashboard</h3>\n            <div className=\"grid grid-cols-2 gap-3\">\n              <button \n                onClick={() => navigate('/host-dashboard')}\n                className=\"bg-white/20 rounded-lg p-3 text-left\"\n              >\n                <i className=\"ri-dashboard-line text-lg mb-2 block\"></i>\n                <span className=\"text-sm font-medium\">Dashboard</span>\n              </button>\n              <button \n                onClick={() => navigate('/settings')}\n                className=\"bg-white/20 rounded-lg p-3 text-left\"\n              >\n                <i className=\"ri-robot-line text-lg mb-2 block\"></i>\n                <span className=\"text-sm font-medium\">AI Assistant</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Menu Items */}\n      <main className=\"px-4 pb-20\">\n        <div className=\"space-y-2\">\n          {menuItems.map((item, index) => (\n            <button\n              key={index}\n              onClick={item.action}\n              className=\"w-full bg-white dark:bg-gray-800 rounded-xl p-4 text-left shadow-sm hover:shadow-md transition-shadow border border-gray-100 dark:border-gray-700\"\n            >\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-10 h-10 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center\">\n                  <i className={`${item.icon} text-gray-600 dark:text-gray-400 text-lg`}></i>\n                </div>\n                <div className=\"flex-1\">\n                  <h3 className=\"font-medium text-gray-900 dark:text-white\">{item.title}</h3>\n                  <p className=\"text-sm text-gray-600 dark:text-gray-400\">{item.subtitle}</p>\n                </div>\n                <i className=\"ri-arrow-right-s-line text-gray-400 dark:text-gray-500\"></i>\n              </div>\n            </button>\n          ))}\n        </div>\n\n        {/* Sign Out */}\n        <div className=\"mt-8\">\n          <button \n            onClick={handleLogout}\n            className=\"w-full bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-xl p-4 font-medium border border-red-100 dark:border-red-800\"\n          >\n            <i className=\"ri-logout-box-line mr-2\"></i>\n            Sign Out\n          </button>\n        </div>\n      </main>\n\n      {/* Bottom Navigation */}\n      <nav className=\"fixed bottom-0 w-full bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700\">\n        <div className=\"grid grid-cols-4 h-16\">\n          <button \n            onClick={() => navigate('/')}\n            className=\"flex flex-col items-center justify-center space-y-1 text-gray-400 dark:text-gray-500\"\n          >\n            <i className=\"ri-compass-line text-lg\"></i>\n            <span className=\"text-xs\">Discover</span>\n          </button>\n          <button \n            onClick={() => navigate('/messages')}\n            className=\"flex flex-col items-center justify-center space-y-1 text-gray-400 dark:text-gray-500\"\n          >\n            <i className=\"ri-message-3-line text-lg\"></i>\n            <span className=\"text-xs\">Messages</span>\n          </button>\n          <button \n            onClick={() => navigate(isCreator ? '/subscribers' : '/subscriptions')}\n            className=\"flex flex-col items-center justify-center space-y-1 text-gray-400 dark:text-gray-500\"\n          >\n            <i className={isCreator ? 'ri-user-heart-line text-lg' : 'ri-vip-crown-line text-lg'}></i>\n            <span className=\"text-xs\">{isCreator ? 'Subscribers' : 'Subscriptions'}</span>\n          </button>\n          <button className=\"flex flex-col items-center justify-center space-y-1 text-blue-600 dark:text-blue-400\">\n            <i className=\"ri-user-line text-lg\"></i>\n            <span className=\"text-xs\">Profile</span>\n          </button>\n        </div>\n      </nav>\n    </div>\n  );\n}\n"],"names":["ProfilePage","navigate","useNavigate","location","useLocation","profile","isDemoUser","loading","setDemoUser","useAuth","isCreator","setIsCreator","useState","useEffect","handleLogout","signOut","error","userStats","currentUser","n","menuItems","jsx","jsxs","item","index"],"mappings":"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"}