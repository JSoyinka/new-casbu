{"version":3,"file":"page-Cixm7VlN.js","sources":["../../src/pages/login/page.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { signIn } from '../../lib/supabase';\nimport { useAuth } from '../../contexts/AuthContext';\n\nexport default function LoginPage() {\n  const navigate = useNavigate();\n  const { setDemoUser, user, loading } = useAuth();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n\n  // Navigate to home when user is authenticated\n  useEffect(() => {\n    if (!loading && user) {\n      console.log('User authenticated, navigating to home');\n      navigate('/');\n    }\n  }, [user, loading, navigate]);\n\n  const handleLogin = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n    setIsLoading(true);\n\n    try {\n      console.log('Attempting login with email:', email);\n      const result = await signIn(email, password);\n      \n      console.log('Login result:', result);\n      \n      if (!result?.user) {\n        console.error('No user in result');\n        setError('Login failed. Please try again.');\n        setIsLoading(false);\n      }\n      // Don't navigate here - let the useEffect handle it when auth state updates\n    } catch (err: any) {\n      console.error('Login error:', err);\n      setError(err?.message || 'Failed to sign in. Please check your credentials.');\n      setIsLoading(false);\n    }\n  };\n\n  const handleDemoLogin = () => {\n    // Mark the session as a demo user and navigate home\n    setDemoUser(true);\n    navigate('/');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-900 flex items-center justify-center px-4\">\n      <div className=\"w-full max-w-md\">\n        {/* Logo */}\n        <div className=\"text-center mb-8\">\n          <div className=\"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-blue-500 via-blue-700 to-purple-600 rounded-3xl mb-4 shadow-2xl\">\n            <i className=\"ri-cpu-line text-white text-3xl\"></i>\n          </div>\n          <h1\n            className=\"text-4xl font-bold text-white mb-2\"\n            style={{ fontFamily: \"'Orbitron', sans-serif\", letterSpacing: '0.05em' }}\n          >\n            DirectLine\n          </h1>\n          <p className=\"text-gray-400\">Connect with amazing creators</p>\n        </div>\n\n        {/* Login Form */}\n        <div className=\"bg-gray-800 rounded-3xl p-8 shadow-2xl border border-gray-700\">\n          <h2 className=\"text-2xl font-bold text-white mb-6\">Welcome Back</h2>\n\n          {error && (\n            <div className=\"bg-red-500/20 border border-red-500/50 rounded-xl p-4 mb-6\">\n              <p className=\"text-red-300 text-sm\">{error}</p>\n            </div>\n          )}\n\n          <form onSubmit={handleLogin} className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                Email Address\n              </label>\n              <input\n                type=\"email\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                placeholder=\"Enter your email\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                Password\n              </label>\n              <div className=\"relative\">\n                <input\n                  type={showPassword ? 'text' : 'password'}\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  placeholder=\"Enter your password\"\n                  required\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white\"\n                >\n                  <i className={showPassword ? 'ri-eye-off-line' : 'ri-eye-line'}></i>\n                </button>\n              </div>\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              className=\"w-full bg-gradient-to-r from-blue-500 via-blue-700 to-purple-600 text-white py-3 rounded-xl font-semibold hover:scale-105 transition-transform disabled:opacity-50 disabled:cursor-not-allowed shadow-lg\"\n            >\n              {isLoading ? 'Signing in...' : 'Sign In'}\n            </button>\n          </form>\n\n          <div className=\"mt-6 text-center\">\n            <button className=\"text-gray-400 text-sm hover:text-white\">\n              Forgot password?\n            </button>\n          </div>\n        </div>\n\n        {/* Demo User Button */}\n        <div className=\"mt-6\">\n          <button\n            onClick={handleDemoLogin}\n            className=\"w-full bg-gray-800 border border-gray-700 text-white py-3 rounded-xl font-medium hover:bg-gray-700 transition-all\"\n          >\n            <i className=\"ri-user-smile-line mr-2\"></i>\n            Sign in as Demo User\n          </button>\n        </div>\n\n        {/* Sign Up Link */}\n        <div className=\"mt-6 text-center\">\n          <p className=\"text-gray-400 mb-3\">Want to become a creator?</p>\n          <button\n            onClick={() => navigate('/host-signup')}\n            className=\"w-full bg-gradient-to-r from-purple-500 to-pink-500 text-white py-3 rounded-xl font-semibold hover:scale-105 transition-transform shadow-lg\"\n          >\n            Create Creator Account\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["LoginPage","navigate","useNavigate","setDemoUser","user","loading","useAuth","email","setEmail","useState","password","setPassword","isLoading","setIsLoading","error","setError","showPassword","setShowPassword","useEffect","handleLogin","e","result","signIn","err","handleDemoLogin","jsxs","jsx"],"mappings":"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"}